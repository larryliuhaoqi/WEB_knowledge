# `数据库事务隔离级别`

在数据库操作中，为了有效保证并发读取数据的正确性，提出的事务隔离级别。在标准SQL规范中，定义了4个事务隔离级别，不同的隔离级别对事务的处理不同。

- Read uncommitted (未授权读取、读未提交)
- Read committed（授权读取、读提交）
- Repeatable read（可重复读取）
- Serializable（序列化）

1) 四大隔离级别：串行化、可重复读、读已提交、读未提交；
2) 四大特性(ACID)：原子性、一致性、隔离性、持久性；
3) 三个问题：脏读、不可重复度、幻读；

`脏读：`
指在一个事务处理过程里读取了另一个未提交的事务中的数据，读取数据不一致。

`不可重复读：`
是指在对于数据库中的某个数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了。

`虚读(幻读)：`
第一个事务A对一定范围的数据进行批量修改，第二个事务B在这个范围增加一条数据，这时候第一个事务就会丢失对新增数据的修改。

不可重复读和脏读的区别：脏读是某一事务读取了另一个事务未提交的脏数据，而不可重复读则是读取了前一事务提交的数据。　　

幻读和不可重复读区别：幻读是针对插入操作的(表级别锁)，不可重复度是针对更新和删除操作的(行级别锁)。

## `未授权读取（Read Uncommitted）`

也称为`读未提交`：允许脏读取，但不允许更新丢失。如果一个事务已经开始写数据，则另外一个事务则不允许同时进行写操作，但允许其他事务读此行数据。该隔离级别可以通过“排他写锁”实现。

## `授权读取（Read Committed）`

也称为`读提交`：允许不可重复读取，但不允许脏读取。读取数据的事务允许其他事务继续访问该行数据，但是未提交的写事务将会禁止其他事务访问该行。可以通过“瞬间共享读锁”和“排他写锁”实现。

## `可重复读取（Repeatable Read）`

禁止不可重复读取和脏读取，但是有时可能出现幻读数据。读取数据的事务将会禁止写事务（但允许读事务），写事务则禁止任何其他事务。可以通过“共享读锁”和“排他写锁”实现。

## `序列化（Serializable）`

提供严格的事务隔离。它要求事务序列化执行，事务只能一个接着一个地执行，不能并发执行。仅仅通过“行级锁”是无法实现事务序列化的，必须通过其他机制保证新插入的数据不会被刚执行查询操作的事务访问到。

## 总结

`隔离级别越高，越能保证数据的完整性和一致性，但是对并发性能的影响也越大。对于多数应用程序，可以优先考虑把数据库系统的隔离级别设为Read Committed。它能够避免脏读取，而且具有较好的并发性能。尽管它会导致不可重复读、幻读和第二类丢失更新这些并发问题，在可能出现这类问题的个别场合，可以由应用程序采用悲观锁或乐观锁来控制。`
